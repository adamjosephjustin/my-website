<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L2: Where Should I Go?</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <header class="academy-header">
        <h1>Lesson 2: Where Should I Go?</h1>
        <p><a href="../index.html" style="color: var(--color-accent);">‚Üê Back to Course Index</a></p>
    </header>

    <div class="lesson-page-container">
        <p><strong>Goal:</strong> Teach the robot ü§ñ to make decisions. This is **If/Else logic**!</p>
        
        <div class="game-area">
            <h3 style="color: #E74C3C;">Instruction:</h3>
            <p id="instruction-text" style="font-size: 1.5rem; font-weight: bold;"></p>
            
            <div id="decision-box" style="display: flex; gap: 30px; margin: 20px 0;">
                <div id="red-door" class="door" style="width: 100px; height: 100px; background-color: #E74C3C; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 3rem;">
                    üî¥
                </div>
                <div id="blue-door" class="door" style="width: 100px; height: 100px; background-color: #3498DB; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 3rem;">
                    üîµ
                </div>
            </div>
            
            <div class="game-feedback" id="game-feedback">Click the door the robot should enter!</div>
        </div>
        
        <a href="#" id="next-btn" class="game-button hidden">Next Lesson ‚Üí</a>
    </div>

    <script src="../js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            initializeLesson(2); 

            const targetColor = Math.random() < 0.5 ? 'Red' : 'Blue';
            const robotState = Math.random() < 0.5 ? 'Wants' : 'Avoids';
            
            const instructionText = document.getElementById('instruction-text');
            const redDoor = document.getElementById('red-door');
            const blueDoor = document.getElementById('blue-door');
            const feedback = document.getElementById('game-feedback');

            // Set the instruction based on random variables
            instructionText.innerText = `IF the robot ${robotState} the ${targetColor} color, click the ${targetColor} door!`;
            
            function checkAnswer(clickedColor) {
                // If robot WANTS the color, clickedColor must match targetColor
                // If robot AVOIDS the color, clickedColor must NOT match targetColor

                let isCorrect;
                if (robotState === 'Wants') {
                    isCorrect = clickedColor === targetColor;
                } else { // robotState === 'Avoids'
                    isCorrect = clickedColor !== targetColor;
                }

                if (isCorrect) {
                    feedback.innerText = "‚úÖ That's correct! The robot followed your IF/ELSE logic.";
                    redDoor.onclick = null; // Disable further clicks
                    blueDoor.onclick = null;
                    window.lessonSuccess();
                } else {
                    feedback.innerText = "‚ùå Incorrect! Reread the instruction carefully and try again.";
                    feedback.style.color = '#E74C3C';
                }
            }

            redDoor.onclick = () => checkAnswer('Red');
            blueDoor.onclick = () => checkAnswer('Blue');
        });
    </script>
</body>
</html>
