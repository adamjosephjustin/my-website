<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adam's Pictionary Party üé®</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Bangers&family=Comic+Neue:wght@400;700&display=swap"
        rel="stylesheet">

    <!-- FIREBASE SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
</head>

<body>

    <div id="app-container">
        <!-- 1. WELCOME STEP -->
        <div id="view-welcome" class="view-card">
            <h1>üé® Pictionary Party!</h1>
            <p>Welcome! What is your name?</p>
            <input type="text" id="input-name" class="neat-input" placeholder="Adam..." maxlength="12">
            <div class="btn-group">
                <button class="btn-big btn-primary" onclick="submitName()">LET'S GO! üöÄ</button>
            </div>
        </div>

        <!-- 2. MODE SELECT -->
        <div id="view-mode-select" class="view-card hidden">
            <h2>Hi, <span id="display-name" style="color:var(--primary)">Friend</span>! üëã</h2>
            <p>What do you want to do?</p>
            <div class="btn-group">
                <button class="btn-big btn-secondary" onclick="enterJoinMode()">ü§ù JOIN A FRIEND</button>
                <div style="font-size:0.8rem; color:#888;">- OR -</div>
                <button class="btn-big btn-primary" onclick="enterCreateMode()">‚ú® CREATE NEW ROOM</button>
            </div>
            <button class="btn-back" onclick="location.reload()">Back</button>
        </div>

        <!-- 3. CREATE SETTINGS -->
        <div id="view-create" class="view-card hidden">
            <h2>Create Room</h2>

            <p>Language</p>
            <div class="toggle-group" data-type="lang">
                <div class="toggle-option selected" data-value="EN" onclick="selectSetting('lang','EN')">üá¨üáß English
                </div>
                <div class="toggle-option" data-value="NL" onclick="selectSetting('lang','NL')">üá≥üá± Dutch</div>
            </div>

            <p>Difficulty</p>
            <div class="toggle-group" data-type="diff">
                <div class="toggle-option selected" data-value="EASY" onclick="selectSetting('diff','EASY')">üòÑ Easy
                </div>
                <div class="toggle-option" data-value="HARD" onclick="selectSetting('diff','HARD')">ü§Ø Hard</div>
            </div>

            <p>Number of Rounds</p>
            <div class="toggle-group" data-type="rounds">
                <div class="toggle-option" data-value="3" onclick="selectSetting('rounds','3')">3</div>
                <div class="toggle-option selected" data-value="5" onclick="selectSetting('rounds','5')">5</div>
                <div class="toggle-option" data-value="7" onclick="selectSetting('rounds','7')">7</div>
                <div class="toggle-option" data-value="10" onclick="selectSetting('rounds','10')">10</div>
            </div>

            <div class="btn-group">
                <button class="btn-big btn-primary" onclick="createGame()">START GAME ‚ñ∂</button>
            </div>
            <button class="btn-back" onclick="switchView('mode')">Back</button>
        </div>

        <!-- 4. JOIN ROOM -->
        <div id="view-join" class="view-card hidden">
            <h2>Join Room</h2>
            <p>Enter the 4-digit code:</p>
            <input type="number" id="input-room-code" class="neat-input code-input" placeholder="0000">
            <div class="btn-group">
                <button class="btn-big btn-secondary" onclick="joinGame()">JOIN NOW! üöÄ</button>
            </div>
            <button class="btn-back" onclick="switchView('mode')">Back</button>
        </div>

        <!-- 5. GAME BOARD -->
        <div id="view-game" class="hidden">
            <div class="game-header">
                <div id="room-badge">Room: ???</div>
                <div id="word-display" style="font-size:2rem; font-family:'Bangers'; color:var(--dark);">WAITING...
                </div>
                <div style="display:flex; gap:10px; align-items:center;">
                    <div id="turn-display" class="timer-badge" style="background:#FFE66D; color:#2F2F2F;"></div>
                    <div id="round-display" class="timer-badge"></div>
                </div>
                <button class="btn-exit" onclick="exitRoom()">üö™ Exit</button>
            </div>

            <!-- HOST CONTROLS -->
            <div style="text-align:center; margin:10px 0;">
                <button id="start-game-btn" class="btn-big btn-primary" onclick="startGame()" style="display:none;">üéÆ
                    START GAME</button>
                <button id="skip-word-btn" class="btn-back" onclick="skipWord()"
                    style="display:none; background:#ff6b6b;">üòµ Can't Draw This!</button>
                <button id="skip-turn-btn" class="btn-back" onclick="nextTurn()" style="display:none;">‚è© SKIP
                    TURN</button>
                <button id="new-game-btn" class="btn-big btn-secondary" onclick="newGame()" style="display:none;">üîÑ
                    PLAY AGAIN</button>
            </div>

            <div style="display:flex; gap:20px; flex-wrap: wrap;">
                <!-- MAIN CANVAS AREA -->
                <div style="flex:1; min-width:300px;">
                    <div class="canvas-container">
                        <canvas id="main-canvas" width="800" height="500" style="width:100%; display:block;"></canvas>
                    </div>

                    <!-- COLOR TOOLBAR - Always visible -->
                    <div class="canvas-toolbar" style="margin-top:15px; display:flex; justify-content:center;">
                        <div class="color-dot active" style="background:black" onclick="setColor('#000', this)"></div>
                        <div class="color-dot" style="background:#ff4757" onclick="setColor('#ff4757', this)"></div>
                        <div class="color-dot" style="background:#2ed573" onclick="setColor('#2ed573', this)"></div>
                        <div class="color-dot" style="background:#1e90ff" onclick="setColor('#1e90ff', this)"></div>
                        <div class="color-dot" style="background:#ffa502" onclick="setColor('#ffa502', this)"></div>
                        <div class="color-dot" style="background:#ff6348" onclick="setColor('#ff6348', this)"></div>
                        <button onclick="clearBoard()"
                            style="margin-left:20px; padding:8px 20px; border-radius:20px; background:#e74c3c; color:white; border:none; font-family:'Bangers'; font-size:1.1rem; cursor:pointer;">üóëÔ∏è
                            Clear All</button>
                    </div>
                </div>

                <!-- SIDEBAR: PLAYERS + CHAT -->
                <div style="width:280px; display:flex; flex-direction:column; gap:15px;">
                    <!-- Players -->
                    <div class="view-card" style="padding:15px; flex-shrink:0;">
                        <h3 style="margin:0 0 10px 0;">Players</h3>
                        <div id="players-list" style="font-size:0.9rem;">Loading...</div>
                    </div>

                    <!-- Chat -->
                    <div class="view-card" style="padding:15px; flex:1; display:flex; flex-direction:column;">
                        <h3 style="margin:0 0 10px 0;">Guesses</h3>
                        <div id="chat-box" class="chat-box" style="flex:1;"></div>
                        <div style="display:flex; gap:5px; margin-top:10px;">
                            <input id="input-guess" type="text"
                                style="flex:1; padding:8px; border-radius:10px; border:2px solid #ddd; font-size:1rem;"
                                placeholder="Type guess..." onkeydown="if(event.key==='Enter') submitGuess()">
                            <button id="send-guess-btn" onclick="submitGuess()"
                                style="padding:8px 15px; background:var(--success); color:white; border:none; border-radius:10px; cursor:pointer; font-weight:bold;">SEND</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <!-- SCRIPTS -->
    <script src="js/firebase-config.js"></script>
    <script src="js/words.js"></script>
    <script src="js/game.js"></script>
</body>

</html>