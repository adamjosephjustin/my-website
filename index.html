<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flappy Bird Game</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
            background-color: #70c5ce;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Arial', sans-serif;
        }
        canvas {
            background-color: #ffffff;
            display: block;
        }
        #score-board {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
            color: #ffffff;
            z-index: 100;
        }
        .score {
            margin-right: 15px;
        }
    </style>
</head>
<body>

<div id="score-board">
    <span class="score">Score: <span id="current-score">0</span></span>
    <span class="score">High Score: <span id="high-score">0</span></span>
</div>

<canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Set canvas size to fill the screen while maintaining aspect ratio
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Game variables
    const GRAVITY = 0.5;
    const FLAP_STRENGTH = -10;
    let birdY = canvas.height / 2;
    let birdVelocity = 0;
    let birdWidth = 30;
    let birdHeight = 30;
    let birdX = 50;
    let birdFlap = false;

    let pipes = [];
    const pipeWidth = 60;
    const pipeGap = 200;
    let pipeSpeed = 2;
    let frameCount = 0;

    let currentScore = 0;
    let highScore = localStorage.getItem("flappyHighScore") || 0;

    // Draw the bird
    function drawBird() {
        ctx.fillStyle = "yellow";
        ctx.fillRect(birdX, birdY, birdWidth, birdHeight);
    }

    // Draw pipes
    function drawPipes() {
        pipes.forEach((pipe, index) => {
            ctx.fillStyle = "green";
            ctx.fillRect(pipe.x, 0, pipeWidth, pipe.top);
            ctx.fillRect(pipe.x, pipe.top + pipeGap, pipeWidth, canvas.height - pipe.top - pipeGap);
        });
    }

    // Update the game state
    function updateGame() {
        frameCount++;
        
        // Move bird
        if (birdFlap) {
            birdVelocity = FLAP_STRENGTH;
            birdFlap = false;
        }
        birdVelocity += GRAVITY;
        birdY += birdVelocity;

        // Prevent bird from flying out of bounds
        if (birdY <= 0) {
            birdY = 0;
            birdVelocity = 0;
        } else if (birdY + birdHeight >= canvas.height) {
            birdY = canvas.height - birdHeight;
            birdVelocity = 0;
            endGame();
        }

        // Handle pipes
        if (frameCount % 60 === 0) {
            const pipeTop = Math.floor(Math.random() * (canvas.height - pipeGap));
            pipes.push({ x: canvas.width, top: pipeTop });
        }

        pipes.forEach((pipe, index) => {
            pipe.x -= pipeSpeed;
            if (pipe.x + pipeWidth <= 0) {
                pipes.splice(index, 1);
                currentScore++;
            }
        });

        // Check for collisions
        pipes.forEach(pipe => {
            if (birdX + birdWidth > pipe.x && birdX < pipe.x + pipeWidth) {
                if (birdY < pipe.top || birdY + birdHeight > pipe.top + pipeGap) {
                    endGame();
                }
            }
        });

        // Update scores
        if (currentScore > highScore) {
            highScore = currentScore;
            localStorage.setItem("flappyHighScore", highScore);
        }

        // Draw everything
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawBird();
        drawPipes();
        drawScores();
    }

    // Draw the score board
    function drawScores() {
        document.getElementById('current-score').textContent = currentScore;
        document.getElementById('high-score').textContent = highScore;
    }

    // End the game and reset score
    function endGame() {
        alert("Game Over!");
        currentScore = 0;
        pipes = [];
        birdY = canvas.height / 2;
        birdVelocity = 0;
    }

    // Start the game loop
    function gameLoop() {
        updateGame();
        requestAnimationFrame(gameLoop);
    }

    // Handle user input
    window.addEventListener("keydown", (e) => {
        if (e.key === " " || e.key === "ArrowUp") {
            birdFlap = true;
        }
    });

    window.addEventListener("touchstart", (e) => {
        birdFlap = true;
    });

    // Resize canvas on window resize
    window.addEventListener("resize", () => {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    });

    // Start the game
    gameLoop();
</script>

</body>
</html>
